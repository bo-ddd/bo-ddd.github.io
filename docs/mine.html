<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Document</title><style>.box{width:100px;height:100px;background:red}.change{animation:move 2s}@keyframes move{to{background:#ff0}}</style><script defer="defer" src="mine/mine.9e42dba1882995da8a9f.js"></script><link href="mine/mine.1f669061e7b88cf5a542.css" rel="stylesheet"></head><body><div class="box1">hello world;</div><div class="box2">hello world;</div><div class="box3">hello world;</div><div class="box4">hello world;</div><button id="submit">submit</button></body><script>class Ani{constructor(e){this.targets=e.targets,this.count=e.count||1,this.props=e,this.reverse=e.reverse,this.exec()}get curIndex(){return this.props.count-this.count+1}get lastTarget(){return this.targets[this.needReverse?0:this.targets.length-1]}get needReverse(){try{return!0===this.reverse||this.reverse.includes(this.curIndex)}catch(e){return!1}}exec(){let e=this.targets.slice();this.addEventListener(e)}addEventListener(e){if(!e.length)return;let t=this.needReverse?e.pop():e.shift();console.log(t),t.el.classList.add(t.animationClassName);let n=this,a=function(o){o.target.classList.remove(t.animationClassName),t.el.removeEventListener("animationend",a),n.addEventListener(e),o.target==n.lastTarget.el&&n.count>1&&(n.count--,setTimeout((function(){n.exec()})))};t.el.addEventListener("animationend",a)}}var ani=new Ani({targets:[{el:document.querySelector(".box1"),animationClassName:"change"},{el:document.querySelector(".box2"),animationClassName:"change"},{el:document.querySelector(".box3"),animationClassName:"change"},{el:document.querySelector(".box4"),animationClassName:"change"}],count:4,reverse:!0}),oBox1=document.querySelector(".box1"),oBox2=document.querySelector(".box2"),oBox3=document.querySelector(".box3"),oBox4=document.querySelector(".box4"),arr=[{el:document.querySelector(".box1"),animationClassName:"change"},{el:document.querySelector(".box2"),animationClassName:"change"},{el:document.querySelector(".box3"),animationClassName:"change"},{el:document.querySelector(".box4"),animationClassName:"change"}]</script></html>